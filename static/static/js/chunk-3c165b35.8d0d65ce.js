(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c165b35"],{"12d8":function(e,t,n){"use strict";var i=n("2d5c"),a=n.n(i);a.a},"2d5c":function(e,t,n){},3223:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticStyle:{"min-width":"500px"},attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"职位管理",name:"posmana"}},[n("PosMana")],1)],1)],1)},a=[],l=n("e6e3"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"380px","margin-right":"10px"},attrs:{placeholder:"请输入职位名称进行模糊搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initPositions},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initPositions(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initPositions}},[e._v("\n            搜索\n        ")])],1),n("div",{staticClass:"posManaMain"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.positions,border:"",size:"small",stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"职位名称",width:"200"}}),n("el-table-column",{attrs:{prop:"remark",label:"职位描述",width:"250"}}),n("el-table-column",{attrs:{prop:"createDate",width:"150",label:"创建时间"}}),n("el-table-column",{attrs:{width:"150",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enabled?n("el-tag",{attrs:{size:"small",type:"success"}},[e._v("已启用")]):n("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("未启用")])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"left",width:"145"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.power},on:{click:function(n){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n                    ")]),n("el-button",{attrs:{size:"mini",type:"danger",disabled:!e.power},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                    ")])]}}])})],1),n("el-button",{staticStyle:{"margin-top":"8px"},attrs:{type:"danger",size:"small",disabled:0==e.multipleSelection.length||!e.power},on:{click:e.deleteMany}},[e._v("批量删除\n        ")])],1),n("el-dialog",{attrs:{title:"修改职位",visible:e.dialogVisible,width:"360px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("div",[n("el-tag",[e._v("职位名称")]),n("el-input",{staticClass:"updatePosInput",attrs:{size:"small"},model:{value:e.updatePos.name,callback:function(t){e.$set(e.updatePos,"name",t)},expression:"updatePos.name"}})],1),n("div",[n("el-tag",[e._v("职位描述")]),n("el-input",{staticClass:"updatePosInput",attrs:{size:"small"},model:{value:e.updatePos.remark,callback:function(t){e.$set(e.updatePos,"remark",t)},expression:"updatePos.remark"}})],1),n("div",[n("el-tag",[e._v("是否启用")]),n("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用"},model:{value:e.updatePos.enabled,callback:function(t){e.$set(e.updatePos,"enabled",t)},expression:"updatePos.enabled"}})],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.doUpdate}},[e._v("确 定")])],1)])],1)},o=[],r=(n("7f7f"),n("a481"),{name:"PosMana",data:function(){return{searchValue:{name:null},pos:{name:""},dialogVisible:!1,loading:!1,power:1!=JSON.parse(window.sessionStorage.getItem("user")).status,updatePos:{name:"",remark:"",enabled:!1},multipleSelection:[],positions:[],keyword:""}},mounted:function(){this.initPositions()},methods:{deleteMany:function(){var e=this;this.$confirm("此操作将永久删除【"+this.multipleSelection.length+"】条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequest("/position/basic/ids/",e.multipleSelection).then((function(t){20000402===t.status?e.$router.replace("/"):200===t.status&&(e.initPositions(),window.sessionStorage.removeItem("positions"))}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.multipleSelection=e},showEditView:function(e,t){Object.assign(this.updatePos,t),this.dialogVisible=!0},doUpdate:function(){var e=this;if(""==this.updatePos.name||""==this.updatePos.remark)return this.$message.error("职位名称以及描述不可以为空！");this.putRequest("/position/basic/",this.updatePos).then((function(t){20000402===t.status?e.$router.replace("/"):200===t.status&&(e.initPositions(),e.updatePos.name="",e.updatePos.remark="",e.dialogVisible=!1,window.sessionStorage.removeItem("positions"))}))},handleDelete:function(e,t){var n=this;this.$confirm("此操作将永久删除【"+t.name+"】职位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.deleteRequest("/position/basic/",t).then((function(e){20000402===e.status?n.$router.replace("/"):200===e.status&&(n.initPositions(),window.sessionStorage.removeItem("positions"))}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},initPositions:function(e){var t=this;this.loading=!0;var n="/position/basic/";e&&"advanced"==e?this.searchValue.name&&(n+="?name="+this.searchValue.name):n+="?name="+this.keyword,this.getRequest(n).then((function(e){t.loading=!1,20000402===e.status?t.$router.replace("/"):200===e.status?t.positions=e.obj:200!=e.status&&(t.users=null,t.total=0)}))}}}),c=r,d=(n("d1a9"),n("2877")),u=Object(d["a"])(c,s,o,!1,null,null,null),p=u.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"300px"},attrs:{size:"small","prefix-icon":"el-icon-plus",placeholder:"添加职称..."},model:{value:e.jl.name,callback:function(t){e.$set(e.jl,"name",t)},expression:"jl.name"}}),n("el-select",{staticStyle:{"margin-left":"5px","margin-right":"5px"},attrs:{placeholder:"职称等级",size:"small"},model:{value:e.jl.titleLevel,callback:function(t){e.$set(e.jl,"titleLevel",t)},expression:"jl.titleLevel"}},e._l(e.titleLevels,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),n("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:e.addJobLevel}},[e._v("添加")])],1),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{data:e.jls,border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",size:"small"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"职称名称",width:"150"}}),n("el-table-column",{attrs:{prop:"titleLevel",label:"职称级别"}}),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间"}}),n("el-table-column",{attrs:{label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enabled?n("el-tag",{attrs:{type:"success"}},[e._v("已启用")]):n("el-tag",{attrs:{type:"danger"}},[e._v("未启用")])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.showEditView(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){return e.deleteHandler(t.row)}}},[e._v("删除")])]}}])})],1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger",size:"small",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除\n          ")])],1),n("el-dialog",{attrs:{title:"修改职称",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("table",[n("tr",[n("td",[n("el-tag",[e._v("职称名")])],1),n("td",[n("el-input",{attrs:{size:"small"},model:{value:e.updateJl.name,callback:function(t){e.$set(e.updateJl,"name",t)},expression:"updateJl.name"}})],1)]),n("tr",[n("td",[n("el-tag",[e._v("职称级别")])],1),n("td",[n("el-select",{staticStyle:{"margin-left":"5px","margin-right":"5px"},attrs:{placeholder:"职称等级",size:"small"},model:{value:e.updateJl.titleLevel,callback:function(t){e.$set(e.updateJl,"titleLevel",t)},expression:"updateJl.titleLevel"}},e._l(e.titleLevels,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),n("tr",[n("td",[n("el-tag",[e._v("是否启用")])],1),n("td",[n("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用"},model:{value:e.updateJl.enabled,callback:function(t){e.$set(e.updateJl,"enabled",t)},expression:"updateJl.enabled"}})],1)])])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.doUpdate}},[e._v("确 定")])],1)])],1)},f=[],h=(n("ac6a"),{name:"JobLevelMana",data:function(){return{dialogVisible:!1,loading:!1,multipleSelection:[],updateJl:{name:"",titleLevel:"",enabled:!1},jl:{name:"",titleLevel:""},jls:[],titleLevels:["正高级","副高级","中级","初级","员级"]}},mounted:function(){this.initJls()},methods:{deleteMany:function(){var e=this;this.$confirm("此操作将永久删除【"+this.multipleSelection.length+"】条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="?";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.deleteRequest("/system/basic/joblevel/"+t).then((function(t){t&&e.initJls()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},doUpdate:function(){var e=this;this.putRequest("/system/basic/joblevel/",this.updateJl).then((function(t){t&&(e.initJls(),e.dialogVisible=!1)}))},handleSelectionChange:function(e){this.multipleSelection=e},showEditView:function(e){Object.assign(this.updateJl,e),this.dialogVisible=!0},deleteHandler:function(e){var t=this;this.$confirm("此操作将永久【"+e.name+"】职称, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/joblevel/"+e.id).then((function(e){e&&t.initJls()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},addJobLevel:function(){var e=this;this.jl.name&&this.jl.titleLevel?this.postRequest("/system/basic/joblevel/",this.jl).then((function(t){t&&e.initJls()})):this.$message.error("添加字段不可以为空!")},initJls:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/joblevel/").then((function(t){e.loading=!1,t&&(e.jls=t,e.jl={name:"",titleLevel:""})}))}}}),g=h,v=Object(d["a"])(g,m,f,!1,null,"720745ab",null),b=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n    奖惩规则\n")])},k=[],x={name:"EcMana"},w=x,_=Object(d["a"])(w,y,k,!1,null,"45fe8b3e",null),S=_.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.globalLoading,expression:"globalLoading"}],attrs:{"element-loading-text":"正在添加...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("div",{staticClass:"permissManaTool"},[n("el-input",{attrs:{size:"small",placeholder:"请输入角色英文名"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2),n("el-input",{attrs:{size:"small",placeholder:"请输入角色中文名"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doAddRole(t)}},model:{value:e.role.nameZh,callback:function(t){e.$set(e.role,"nameZh",t)},expression:"role.nameZh"}}),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.doAddRole}},[e._v("添加角色")])],1),n("div",{staticClass:"permissManaMain"},[n("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",accordion:""},on:{change:e.change},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.roles,(function(t,i){return n("el-collapse-item",{key:i,attrs:{title:t.nameZh,name:t.id}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("可访问的资源")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#ff0000"},attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(n){return e.deleteRole(t)}}})],1),n("div",[n("el-tree",{key:i,ref:"tree",refInFor:!0,attrs:{"show-checkbox":"","node-key":"id","default-checked-keys":e.selectedMenus,data:e.allmenus,props:e.defaultProps}}),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[n("el-button",{on:{click:e.cancelUpdate}},[e._v("取消修改")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.doUpdate(t.id,i)}}},[e._v("确认修改")])],1)],1)])],1)})),1)],1)])},P=[],j={name:"PermissMana",data:function(){return{role:{name:"",nameZh:""},allmenus:[],activeName:-1,selectedMenus:[],roles:[],loading:!1,globalLoading:!1,defaultProps:{children:"children",label:"name"}}},mounted:function(){this.initRoles()},methods:{deleteRole:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.nameZh+"】角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/permiss/role/"+e.id).then((function(e){e&&t.initRoles()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},doAddRole:function(){var e=this;this.role.name&&this.role.nameZh?(this.globalLoading=!0,this.postRequest("/system/basic/permiss/role",this.role).then((function(t){e.globalLoading=!1,t&&(e.role.name="",e.role.nameZh="",e.initRoles())}))):this.$message.error("数据不可以为空")},cancelUpdate:function(){this.activeName=-1},doUpdate:function(e,t){var n=this,i=this.$refs.tree[t],a=i.getCheckedKeys(!0),l="/system/basic/permiss/?rid="+e;a.forEach((function(e){l+="&mids="+e})),this.putRequest(l).then((function(e){e&&(n.activeName=-1)}))},change:function(e){e&&(this.initAllMenus(),this.initSelectedMenus(e))},initSelectedMenus:function(e){var t=this;this.getRequest("/system/basic/permiss/mids/"+e).then((function(e){e&&(t.selectedMenus=e)}))},initAllMenus:function(){var e=this;this.getRequest("/system/basic/permiss/menus").then((function(t){t&&(e.allmenus=t)}))},initRoles:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/permiss/").then((function(t){e.loading=!1,t&&(e.roles=t)}))}}},z=j,R=(n("c06a"),Object(d["a"])(z,$,P,!1,null,null,null)),D=R.exports,J={name:"PosBasic",data:function(){return{activeName:"posmana"}},components:{DepMana:l["a"],PosMana:p,JobLevelMana:b,EcMana:S,PermissMana:D}},M=J,V=Object(d["a"])(M,i,a,!1,null,"b22a99aa",null);t["default"]=V.exports},"69f6":function(e,t,n){"use strict";var i=n("ed24"),a=n.n(i);a.a},7531:function(e,t,n){},"8f67":function(e,t,n){},a7c4:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex",margin:"30px 10px"}},[n("div",{staticStyle:{border:"2px solid skyblue",padding:"20px",width:"20%","min-width":"350px"}},[n("el-row",{staticStyle:{"margin-bottom":"20px"}},[n("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"addPosInput",attrs:{disabled:!e.power,size:"small","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",placeholder:"填写职位名称...","prefix-icon":"el-icon-plus"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPosition(t)}},model:{value:e.pos.name,callback:function(t){e.$set(e.pos,"name",t)},expression:"pos.name"}})],1),n("el-row",{staticStyle:{"margin-bottom":"20px"}},[n("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"addPosInput",staticStyle:{"margin-right":"20px"},attrs:{disabled:!e.power,size:"small","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",placeholder:"填写职位描述...","prefix-icon":"el-icon-plus"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPosition(t)}},model:{value:e.pos.remark,callback:function(t){e.$set(e.pos,"remark",t)},expression:"pos.remark"}})],1),n("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:e.addPosition}},[e._v("添加")])],1)])},a=[],l=(n("a481"),n("7f7f"),{name:"PosAdd",data:function(){return{pos:{name:"",remark:""},power:1!=JSON.parse(window.sessionStorage.getItem("user")).status,loading:!1}},methods:{addPosition:function(){var e=this;if(""==this.pos.name||""==this.pos.remark)return this.$message.error("职位名称以及描述不可以为空！");this.postRequest("/position/basic/",this.pos).then((function(t){20000402===t.status?e.$router.replace("/"):200===t.status&&(e.pos.name="",e.pos.remark="",window.sessionStorage.removeItem("positions"))}))}}}),s=l,o=(n("12d8"),n("2877")),r=Object(o["a"])(s,i,a,!1,null,null,null);t["default"]=r.exports},c06a:function(e,t,n){"use strict";var i=n("8f67"),a=n.n(i);a.a},d1a9:function(e,t,n){"use strict";var i=n("7531"),a=n.n(i);a.a},e6e3:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"30%","min-width":"350px"}},[n("el-input",{attrs:{placeholder:"请输入部门名称进行搜索...","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),n("el-tree",{ref:"tree",staticStyle:{"margin-top":"20px"},attrs:{data:e.deps,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var i=t.data;return n("span",{staticClass:"custom-tree-node",staticStyle:{display:"flex","justify-content":"space-between",width:"100%"},attrs:{title:i.remark}},[n("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(i.name))]),n("span",[n("el-button",{staticClass:"depBtn",attrs:{type:"primary",size:"mini",disabled:!e.power},on:{click:function(){return e.addDep(i)}}},[e._v("\n                    添加部门\n                ")]),n("el-button",{staticClass:"depBtn",attrs:{type:"danger",size:"mini",disabled:!e.power},on:{click:function(){return e.deleteDep(i)}}},[e._v("\n                    删除部门\n                ")])],1)])}}])}),n("el-dialog",{attrs:{title:"添加部门",visible:e.dialogVisible,width:"360px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("table",[n("tr",[n("td",[n("el-tag",[e._v("上级部门")])],1),n("td",[e._v(e._s(e.pname))])]),n("tr",[n("td",[n("el-tag",[e._v("部门名称")])],1),n("td",[n("el-input",{attrs:{placeholder:"请输入部门名称..."},model:{value:e.dep.name,callback:function(t){e.$set(e.dep,"name",t)},expression:"dep.name"}})],1)]),n("tr",[n("td",[n("el-tag",[e._v("部门描述")])],1),n("td",[n("el-input",{attrs:{placeholder:"请输入部门描述..."},model:{value:e.dep.remark,callback:function(t){e.$set(e.dep,"remark",t)},expression:"dep.remark"}})],1)])])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.doAddDep}},[e._v("确 定")])],1)])],1)},a=[],l=(n("a481"),n("7f7f"),{name:"DepMana",data:function(){return{dialogVisible:!1,filterText:"",dep:{name:"",parentId:-1,remark:""},pname:"",deps:[],defaultProps:{children:"children",label:"name"},power:1!=JSON.parse(window.sessionStorage.getItem("user")).status}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.initDeps()},methods:{initDep:function(){this.dep={name:"",parentId:-1},this.pname=""},addDep2Deps:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id==t.parentId)return i.children=i.children.concat(t),void(i.children.length>0&&(i.parent=!0));this.addDep2Deps(i.children,t)}},doAddDep:function(){var e=this;if(""==this.dep.name||""==this.dep.remark)return this.$message.error("请输入部门名称及描述！");this.postRequest("/department/basic/",this.dep).then((function(t){20000402===t.status?e.$router.replace("/"):200===t.status&&(e.addDep2Deps(e.deps,t.obj),e.dialogVisible=!1,e.initDep(),window.sessionStorage.removeItem("department"))}))},removeDepFromDeps:function(e,t,n){for(var i=0;i<t.length;i++){var a=t[i];if(a.id==n)return t.splice(i,1),void(0==t.length&&(e.parent=!1));this.removeDepFromDeps(a,a.children,n)}},deleteDep:function(e){var t=this;e.parent?this.$message.error("父部门删除失败"):this.$confirm("此操作将永久删除【"+e.name+"】部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.id&&e.name&&t.deleteRequest("/department/basic/",e).then((function(n){20000402===n.status?t.$router.replace("/"):200===n.status&&(t.removeDepFromDeps(null,t.deps,e.id),window.sessionStorage.removeItem("department"))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},addDep:function(e){this.pname=e.name,this.dep.parentId=e.id,this.dep,this.dialogVisible=!0},initDeps:function(){var e=this;this.getRequest("/department/basic/").then((function(t){20000402===t.status?e.$router.replace("/"):200===t.status&&(e.deps=t.obj)}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)}}}),s=l,o=(n("69f6"),n("2877")),r=Object(o["a"])(s,i,a,!1,null,null,null);t["a"]=r.exports},ed24:function(e,t,n){}}]);
//# sourceMappingURL=chunk-3c165b35.8d0d65ce.js.map